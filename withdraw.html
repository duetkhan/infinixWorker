<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Withdraw</title>
<link rel="stylesheet" href="style.css">
<script src="ads.js"></script>
<script src="utils.js"></script>
</head>
<body>
<header>
    <h1>Withdraw Page</h1>
    <div id="top-banner"></div>
</header>

<main>
    <p>Balance: <span id="balance">0</span> TK</p>
    <input type="text" id="account" placeholder="Bkash/Nagad Number">
    <input type="number" id="amount" placeholder="Amount (110-5000)">
    <button id="submit-withdraw">Submit Withdraw</button>

    <h3>History</h3>
    <ul id="history"></ul>
</main>

<div id="bottom-banner"></div>

<script>
showBanner('top-banner');
showBanner('bottom-banner');
updateBalanceDisplay();

let history = JSON.parse(localStorage.getItem('history')||'[]');

function renderHistory(){
    const list = document.getElementById('history');
    list.innerHTML='';
    history.forEach(item=>{
        const li = document.createElement('li');
        li.innerText = `${item.amount} TK to ${item.account} at ${item.date}`;
        list.appendChild(li);
    });
}
renderHistory();

document.getElementById('submit-withdraw').onclick = ()=>{
    const account = document.getElementById('account').value;
    const amount = parseInt(document.getElementById('amount').value);
    if(amount <110 || amount>5000 || amount>balance){ alert("Invalid withdraw"); return;}
    showNativeAd(); // Show native ad
    balance -= amount;
    localStorage.setItem('balance', balance);
    updateBalanceDisplay();
    history.push({account, amount, date:new Date().toLocaleString()});
    localStorage.setItem('history', JSON.stringify(history));
    renderHistory();
}
</script>
</body>
</html>
