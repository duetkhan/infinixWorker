<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Withdraw</title>
<link rel="stylesheet" href="style.css">
<script src="ads.js"></script>
</head>
<body>

<div class="container">

<h2>Withdraw Zone</h2>

<div class="card">
    <p>Balance: <span id="balance">0</span> TK</p>
</div>

<div class="card">
    <input type="text" id="account" placeholder="Bkash / Nagad Number">
    <input type="number" id="amount" placeholder="Amount (110 - 5000)">
    <button id="withdraw-btn">Submit Withdraw</button>
</div>

<div class="card">
    <h4>Withdraw History</h4>
    <ul id="history"></ul>
</div>

<!-- Bottom Banner -->
<div class="card">
    <div id="withdrawBottomBanner"></div>
</div>

</div>

<script>
let balance = Number(localStorage.getItem("balance") || 0);
document.getElementById("balance").innerText = balance;

let history = JSON.parse(localStorage.getItem("history") || "[]");

function renderHistory(){
    const ul = document.getElementById("history");
    ul.innerHTML = "";
    history.forEach(h=>{
        const li = document.createElement("li");
        li.innerText = `${h.amount} TK â†’ ${h.account}`;
        ul.appendChild(li);
    });
}
renderHistory();

/* Bottom banner */
setTimeout(()=>{
    loadBanner(document.getElementById("withdrawBottomBanner"));
},600);

document.getElementById("withdraw-btn").onclick = ()=>{
    const acc = document.getElementById("account").value;
    const amt = Number(document.getElementById("amount").value);

    if(!acc || amt<110 || amt>5000 || amt>balance){
        alert("Invalid Withdraw");
        return;
    }

    showNativeAd();   // Native banner trigger

    balance -= amt;
    localStorage.setItem("balance", balance);
    document.getElementById("balance").innerText = balance;

    history.push({account:acc, amount:amt});
    localStorage.setItem("history", JSON.stringify(history));
    renderHistory();
};
</script>

</body>
</html>
